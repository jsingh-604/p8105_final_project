<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>r_final_proj</title>

<script src="site_libs/header-attrs-2.17/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Project Overview</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="video.html">Screencast</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="data.html">Data</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Trends over time</li>
    <li class="dropdown-header">Health Factors</li>
    <li class="dropdown-header">To be donw</li>
    <li>
      <a href="spatial_maps.html">Spatial trends/visualization</a>
    </li>
  </ul>
</li>
<li>
  <a href="mailto:&lt;js5958@cumc.columbia.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/jsingh-604/p8105_final_project/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">r_final_proj</h1>

</div>


<div id="part-i-observingcleaning-data" class="section level1">
<h1>Part I: Observing/Cleaning Data</h1>
<div id="census-data-load-clean" class="section level2">
<h2>Census Data: Load &amp; Clean</h2>
<ol style="list-style-type: decimal">
<li>Load Data</li>
<li>Choose variables</li>
<li>Create a data frame named ny_df</li>
</ol>
<pre class="r"><code>census_api_key(&quot;aa512886c5449a582d837da8d3a07af66a043fe5&quot;)

census_data &lt;- load_variables(2019, &quot;acs5&quot;, cache=T)
fwrite(census_data, &quot;census_variables.csv&quot;)

vars &lt;- c(tpop = &#39;P001001&#39;,
          medage = &#39;P013001&#39;,
          wpop = &#39;P003002&#39;,
          bpop = &#39;P003003&#39;,
          apop = &#39;P003005&#39;,
          hpop = &#39;P004003&#39;)

ny_df &lt;- get_decennial(state = &quot;ny&quot;, 
                       geography = &quot;county&quot;,
                       variables = vars,
                       geometry = T,
                       output = &quot;wide&quot;)</code></pre>
<pre><code>## 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |                                                                      |   1%
  |                                                                            
  |=                                                                     |   1%
  |                                                                            
  |=                                                                     |   2%
  |                                                                            
  |==                                                                    |   2%
  |                                                                            
  |==                                                                    |   3%
  |                                                                            
  |===                                                                   |   4%
  |                                                                            
  |===                                                                   |   5%
  |                                                                            
  |====                                                                  |   5%
  |                                                                            
  |====                                                                  |   6%
  |                                                                            
  |=====                                                                 |   7%
  |                                                                            
  |======                                                                |   8%
  |                                                                            
  |======                                                                |   9%
  |                                                                            
  |=======                                                               |   9%
  |                                                                            
  |=======                                                               |  10%
  |                                                                            
  |=======                                                               |  11%
  |                                                                            
  |========                                                              |  11%
  |                                                                            
  |========                                                              |  12%
  |                                                                            
  |=========                                                             |  12%
  |                                                                            
  |=========                                                             |  13%
  |                                                                            
  |==========                                                            |  14%
  |                                                                            
  |==========                                                            |  15%
  |                                                                            
  |===========                                                           |  15%
  |                                                                            
  |===========                                                           |  16%
  |                                                                            
  |============                                                          |  16%
  |                                                                            
  |============                                                          |  17%
  |                                                                            
  |=============                                                         |  18%
  |                                                                            
  |=============                                                         |  19%
  |                                                                            
  |==============                                                        |  19%
  |                                                                            
  |==============                                                        |  20%
  |                                                                            
  |==============                                                        |  21%
  |                                                                            
  |===============                                                       |  21%
  |                                                                            
  |===============                                                       |  22%
  |                                                                            
  |================                                                      |  22%
  |                                                                            
  |================                                                      |  23%
  |                                                                            
  |=================                                                     |  24%
  |                                                                            
  |=================                                                     |  25%
  |                                                                            
  |==================                                                    |  25%
  |                                                                            
  |==================                                                    |  26%
  |                                                                            
  |===================                                                   |  27%
  |                                                                            
  |===================                                                   |  28%
  |                                                                            
  |====================                                                  |  28%
  |                                                                            
  |====================                                                  |  29%
  |                                                                            
  |=====================                                                 |  31%
  |                                                                            
  |======================                                                |  31%
  |                                                                            
  |======================                                                |  32%
  |                                                                            
  |=======================                                               |  32%
  |                                                                            
  |=======================                                               |  33%
  |                                                                            
  |=======================                                               |  34%
  |                                                                            
  |========================                                              |  34%
  |                                                                            
  |========================                                              |  35%
  |                                                                            
  |=========================                                             |  35%
  |                                                                            
  |=========================                                             |  36%
  |                                                                            
  |==========================                                            |  37%
  |                                                                            
  |==========================                                            |  38%
  |                                                                            
  |===========================                                           |  38%
  |                                                                            
  |===========================                                           |  39%
  |                                                                            
  |============================                                          |  39%
  |                                                                            
  |============================                                          |  40%
  |                                                                            
  |============================                                          |  41%
  |                                                                            
  |=============================                                         |  41%
  |                                                                            
  |=============================                                         |  42%
  |                                                                            
  |==============================                                        |  42%
  |                                                                            
  |==============================                                        |  43%
  |                                                                            
  |===============================                                       |  44%
  |                                                                            
  |===============================                                       |  45%
  |                                                                            
  |================================                                      |  45%
  |                                                                            
  |================================                                      |  46%
  |                                                                            
  |=================================                                     |  47%
  |                                                                            
  |=================================                                     |  48%
  |                                                                            
  |==================================                                    |  48%
  |                                                                            
  |==================================                                    |  49%
  |                                                                            
  |===================================                                   |  49%
  |                                                                            
  |===================================                                   |  50%
  |                                                                            
  |===================================                                   |  51%
  |                                                                            
  |====================================                                  |  51%
  |                                                                            
  |====================================                                  |  52%
  |                                                                            
  |=====================================                                 |  53%
  |                                                                            
  |=====================================                                 |  54%
  |                                                                            
  |======================================                                |  54%
  |                                                                            
  |======================================                                |  55%
  |                                                                            
  |=======================================                               |  55%
  |                                                                            
  |=======================================                               |  56%
  |                                                                            
  |========================================                              |  57%
  |                                                                            
  |========================================                              |  58%
  |                                                                            
  |=========================================                             |  58%
  |                                                                            
  |=========================================                             |  59%
  |                                                                            
  |==========================================                            |  59%
  |                                                                            
  |==========================================                            |  60%
  |                                                                            
  |===========================================                           |  61%
  |                                                                            
  |============================================                          |  62%
  |                                                                            
  |============================================                          |  63%
  |                                                                            
  |============================================                          |  64%
  |                                                                            
  |=============================================                         |  64%
  |                                                                            
  |=============================================                         |  65%
  |                                                                            
  |==============================================                        |  65%
  |                                                                            
  |==============================================                        |  66%
  |                                                                            
  |===============================================                       |  67%
  |                                                                            
  |===============================================                       |  68%
  |                                                                            
  |================================================                      |  68%
  |                                                                            
  |================================================                      |  69%
  |                                                                            
  |=================================================                     |  69%
  |                                                                            
  |=================================================                     |  70%
  |                                                                            
  |==================================================                    |  71%
  |                                                                            
  |==================================================                    |  72%
  |                                                                            
  |===================================================                   |  72%
  |                                                                            
  |===================================================                   |  73%
  |                                                                            
  |====================================================                  |  74%
  |                                                                            
  |====================================================                  |  75%
  |                                                                            
  |=====================================================                 |  75%
  |                                                                            
  |=====================================================                 |  76%
  |                                                                            
  |======================================================                |  76%
  |                                                                            
  |======================================================                |  77%
  |                                                                            
  |======================================================                |  78%
  |                                                                            
  |=======================================================               |  78%
  |                                                                            
  |=======================================================               |  79%
  |                                                                            
  |========================================================              |  79%
  |                                                                            
  |========================================================              |  80%
  |                                                                            
  |========================================================              |  81%
  |                                                                            
  |=========================================================             |  81%
  |                                                                            
  |=========================================================             |  82%
  |                                                                            
  |==========================================================            |  83%
  |                                                                            
  |===========================================================           |  84%
  |                                                                            
  |===========================================================           |  85%
  |                                                                            
  |============================================================          |  85%
  |                                                                            
  |============================================================          |  86%
  |                                                                            
  |=============================================================         |  86%
  |                                                                            
  |=============================================================         |  87%
  |                                                                            
  |=============================================================         |  88%
  |                                                                            
  |==============================================================        |  88%
  |                                                                            
  |==============================================================        |  89%
  |                                                                            
  |===============================================================       |  89%
  |                                                                            
  |===============================================================       |  90%
  |                                                                            
  |===============================================================       |  91%
  |                                                                            
  |================================================================      |  91%
  |                                                                            
  |================================================================      |  92%
  |                                                                            
  |=================================================================     |  92%
  |                                                                            
  |=================================================================     |  93%
  |                                                                            
  |===================================================================   |  95%
  |                                                                            
  |===================================================================   |  96%
  |                                                                            
  |====================================================================  |  96%
  |                                                                            
  |====================================================================  |  97%
  |                                                                            
  |====================================================================  |  98%
  |                                                                            
  |===================================================================== |  98%
  |                                                                            
  |===================================================================== |  99%
  |                                                                            
  |======================================================================|  99%
  |                                                                            
  |======================================================================| 100%</code></pre>
<pre class="r"><code>ny_df = ny_df %&gt;%
  mutate(
    county = gsub(&quot; County, New York&quot;,&quot;&quot;,NAME))

###Compute Simpson&#39;s Diversity Index **D = ((SUM n(n-1))/N(N-1))**
###Higher value indicates higher diversity

ny_df$race_div &lt;- 1 - (((ny_df$wpop*(ny_df$wpop-1))+
                          (ny_df$bpop*(ny_df$bpop-1))+
                          (ny_df$hpop*(ny_df$hpop-1))+
                          (ny_df$apop*(ny_df$apop-1)))/
                         (ny_df$tpop*(ny_df$tpop-1)))

ny_df = ny_df %&gt;% 
  select(tpop, medage, county, race_div)</code></pre>
</div>
<div id="health-ranking-hr-demographics-data-load-clean"
class="section level2">
<h2>2019-2022 Health Ranking (HR) &amp; Demographics Data: Load &amp;
Clean</h2>
<ol style="list-style-type: decimal">
<li>Load data using <code>read_excel</code></li>
<li>Select sheets: ooutcomes &amp; factors subrankings (contains HR
data), additional measure data (contains demographics data)</li>
<li>Filter so only variables of interest (i.e., race/ethnicity, SES
data, etc. are included)</li>
<li>Rename variables</li>
<li>Merge so demographics &amp; HR data are in one data frame</li>
</ol>
<div id="hr-demogrphics" class="section level3">
<h3>2019 HR &amp; Demogrphics</h3>
<p>Health Ranking Data</p>
<pre class="r"><code>hr2019 = read_excel(&#39;grace/ny_hr19.xls&#39;, sheet = &#39;Outcomes &amp; Factors SubRankings&#39;, skip = 1) %&gt;% 
  janitor::clean_names() %&gt;% 
  slice(-c(1)) %&gt;% 
  select(-starts_with(&quot;z&quot;), -fips) %&gt;% 
  rename(longevity_r = rank_5,
         qol_r = rank_7,
         health_beh_r = rank_9,
         clinical_care_r = rank_11,
         ses_r = rank_13,
         env_r = rank_15)</code></pre>
<pre><code>## New names:
## • `Z-Score` -&gt; `Z-Score...4`
## • `Rank` -&gt; `Rank...5`
## • `Z-Score` -&gt; `Z-Score...6`
## • `Rank` -&gt; `Rank...7`
## • `Z-Score` -&gt; `Z-Score...8`
## • `Rank` -&gt; `Rank...9`
## • `Z-Score` -&gt; `Z-Score...10`
## • `Rank` -&gt; `Rank...11`
## • `Z-Score` -&gt; `Z-Score...12`
## • `Rank` -&gt; `Rank...13`
## • `Z-Score` -&gt; `Z-Score...14`
## • `Rank` -&gt; `Rank...15`</code></pre>
<p>Demographics Data</p>
<pre class="r"><code>demo2019 = read_excel(&#39;grace/ny_hr19.xls&#39;, sheet = &#39;Additional Measure Data&#39;, skip = 1) %&gt;% 
  janitor::clean_names() %&gt;% 
  slice(-c(1)) %&gt;% 
  select(&#39;county&#39;, 
         &#39;segregation_index_2&#39;,
         &#39;number_uninsured_55&#39;,
         &#39;number_uninsured_59&#39;,
         &#39;household_income&#39;, 
         &#39;number_african_american&#39;, 
         &#39;number_american_indian_alaskan_native&#39;, 
         &#39;number_asian&#39;, 
         &#39;number_native_hawaiian_other_pacific_islander&#39;, 
         &#39;number_hispanic&#39;, 
         &#39;number_non_hispanic_white&#39;) %&gt;% 
  rename(median_income = household_income,
         n_black = number_african_american,
         n_aian = number_american_indian_alaskan_native,
         n_asian = number_asian,
         n_nhpi = number_native_hawaiian_other_pacific_islander,
         n_hispanic = number_hispanic,
         n_white = number_non_hispanic_white,
         segregation_score = segregation_index_2) %&gt;% 
  mutate(n_uninsured = number_uninsured_55 + number_uninsured_59)</code></pre>
<pre><code>## New names:
## • `95% CI - Low` -&gt; `95% CI - Low...5`
## • `95% CI - High` -&gt; `95% CI - High...6`
## • `# Deaths` -&gt; `# Deaths...10`
## • `95% CI - Low` -&gt; `95% CI - Low...12`
## • `95% CI - High` -&gt; `95% CI - High...13`
## • `# Deaths` -&gt; `# Deaths...17`
## • `95% CI - Low` -&gt; `95% CI - Low...19`
## • `95% CI - High` -&gt; `95% CI - High...20`
## • `# Deaths` -&gt; `# Deaths...24`
## • `95% CI - Low` -&gt; `95% CI - Low...26`
## • `95% CI - High` -&gt; `95% CI - High...27`
## • `95% CI - Low` -&gt; `95% CI - Low...32`
## • `95% CI - High` -&gt; `95% CI - High...33`
## • `95% CI - Low` -&gt; `95% CI - Low...35`
## • `95% CI - High` -&gt; `95% CI - High...36`
## • `95% CI - Low` -&gt; `95% CI - Low...38`
## • `95% CI - High` -&gt; `95% CI - High...39`
## • `95% CI - Low` -&gt; `95% CI - Low...50`
## • `95% CI - High` -&gt; `95% CI - High...51`
## • `95% CI - Low` -&gt; `95% CI - Low...53`
## • `95% CI - High` -&gt; `95% CI - High...54`
## • `# Uninsured` -&gt; `# Uninsured...55`
## • `% Uninsured` -&gt; `% Uninsured...56`
## • `95% CI - Low` -&gt; `95% CI - Low...57`
## • `95% CI - High` -&gt; `95% CI - High...58`
## • `# Uninsured` -&gt; `# Uninsured...59`
## • `% Uninsured` -&gt; `% Uninsured...60`
## • `95% CI - Low` -&gt; `95% CI - Low...61`
## • `95% CI - High` -&gt; `95% CI - High...62`
## • `95% CI - Low` -&gt; `95% CI - Low...67`
## • `95% CI - High` -&gt; `95% CI - High...68`
## • `95% CI - Low` -&gt; `95% CI - Low...76`
## • `95% CI - High` -&gt; `95% CI - High...77`
## • `95% CI - Low` -&gt; `95% CI - Low...80`
## • `95% CI - High` -&gt; `95% CI - High...81`
## • `95% CI - Low` -&gt; `95% CI - Low...84`
## • `95% CI - High` -&gt; `95% CI - High...85`
## • `95% CI - Low` -&gt; `95% CI - Low...88`
## • `95% CI - High` -&gt; `95% CI - High...89`
## • `95% CI - Low` -&gt; `95% CI - Low...107`
## • `95% CI - High` -&gt; `95% CI - High...108`</code></pre>
<p>Merge HR &amp; Demo Data Frames</p>
<pre class="r"><code>merge2019 = merge(x = hr2019, y = demo2019, by = &quot;county&quot;, all.x = TRUE)</code></pre>
</div>
<div id="hr-demographics" class="section level3">
<h3>2020 HR &amp; Demographics</h3>
<p>Health Ranking Data</p>
<pre class="r"><code>hr2020 = read_excel(&#39;grace/ny_hr20.xlsx&#39;, sheet = &#39;Outcomes &amp; Factors SubRankings&#39;, skip = 1) %&gt;% 
  janitor::clean_names() %&gt;% 
  slice(-c(1)) %&gt;% 
  select(-starts_with(&quot;z&quot;), -fips) %&gt;% 
  rename(longevity_r = rank_5,
         qol_r = rank_7,
         health_beh_r = rank_9,
         clinical_care_r = rank_11,
         ses_r = rank_13,
         env_r = rank_15)</code></pre>
<p>Demographics Data</p>
<pre class="r"><code>demo2020 = read_excel(&#39;grace/ny_hr20.xlsx&#39;, sheet = &#39;Additional Measure Data&#39;, skip = 1) %&gt;% 
  janitor::clean_names() %&gt;% 
  slice(-c(1)) %&gt;% 
  select(&#39;county&#39;, 
         &#39;median_household_income&#39;, 
         &#39;segregation_index_2&#39;,
         &#39;number_uninsured_135&#39;,
         &#39;number_uninsured_139&#39;,
         &#39;number_black&#39;, 
         &#39;number_american_indian_alaska_native&#39;, 
         &#39;number_asian&#39;, 
         &#39;number_native_hawaiian_other_pacific_islander&#39;, 
         &#39;number_hispanic&#39;, 
         &#39;number_non_hispanic_white&#39;) %&gt;% 
  rename(median_income = median_household_income, 
         n_black = number_black, 
         n_aian = number_american_indian_alaska_native, 
         n_asian = number_asian, 
         n_nhpi = number_native_hawaiian_other_pacific_islander, 
         n_hispanic = number_hispanic, 
         n_white = number_non_hispanic_white,
         segregation_score = segregation_index_2) %&gt;% 
  mutate(n_uninsured = number_uninsured_135 + number_uninsured_139)</code></pre>
<pre><code>## New names:
## • `95% CI - Low` -&gt; `95% CI - Low...5`
## • `95% CI - High` -&gt; `95% CI - High...6`
## • `# Deaths` -&gt; `# Deaths...22`
## • `95% CI - Low` -&gt; `95% CI - Low...24`
## • `95% CI - High` -&gt; `95% CI - High...25`
## • `# Deaths` -&gt; `# Deaths...41`
## • `95% CI - Low` -&gt; `95% CI - Low...43`
## • `95% CI - High` -&gt; `95% CI - High...44`
## • `# Deaths` -&gt; `# Deaths...60`
## • `95% CI - Low` -&gt; `95% CI - Low...62`
## • `95% CI - High` -&gt; `95% CI - High...63`
## • `95% CI - Low` -&gt; `95% CI - Low...80`
## • `95% CI - High` -&gt; `95% CI - High...81`
## • `95% CI - Low` -&gt; `95% CI - Low...83`
## • `95% CI - High` -&gt; `95% CI - High...84`
## • `95% CI - Low` -&gt; `95% CI - Low...86`
## • `95% CI - High` -&gt; `95% CI - High...87`
## • `95% CI - Low` -&gt; `95% CI - Low...96`
## • `95% CI - High` -&gt; `95% CI - High...97`
## • `95% CI - Low` -&gt; `95% CI - Low...115`
## • `95% CI - High` -&gt; `95% CI - High...116`
## • `95% CI - Low` -&gt; `95% CI - Low...133`
## • `95% CI - High` -&gt; `95% CI - High...134`
## • `# Uninsured` -&gt; `# Uninsured...135`
## • `% Uninsured` -&gt; `% Uninsured...136`
## • `95% CI - Low` -&gt; `95% CI - Low...137`
## • `95% CI - High` -&gt; `95% CI - High...138`
## • `# Uninsured` -&gt; `# Uninsured...139`
## • `% Uninsured` -&gt; `% Uninsured...140`
## • `95% CI - Low` -&gt; `95% CI - Low...141`
## • `95% CI - High` -&gt; `95% CI - High...142`
## • `95% CI - Low` -&gt; `95% CI - Low...146`
## • `95% CI - High` -&gt; `95% CI - High...147`
## • `Average Grade Performance` -&gt; `Average Grade Performance...148`
## • `Average Grade Performance (Asian)` -&gt; `Average Grade Performance
##   (Asian)...149`
## • `Average Grade Performance (Black)` -&gt; `Average Grade Performance
##   (Black)...150`
## • `Average Grade Performance (Hispanic)` -&gt; `Average Grade Performance
##   (Hispanic)...151`
## • `Average Grade Performance (White)` -&gt; `Average Grade Performance
##   (White)...152`
## • `Average Grade Performance` -&gt; `Average Grade Performance...153`
## • `Average Grade Performance (Asian)` -&gt; `Average Grade Performance
##   (Asian)...154`
## • `Average Grade Performance (Black)` -&gt; `Average Grade Performance
##   (Black)...155`
## • `Average Grade Performance (Hispanic)` -&gt; `Average Grade Performance
##   (Hispanic)...156`
## • `Average Grade Performance (White)` -&gt; `Average Grade Performance
##   (White)...157`
## • `95% CI - Low` -&gt; `95% CI - Low...159`
## • `95% CI - High` -&gt; `95% CI - High...160`
## • `95% CI - Low` -&gt; `95% CI - Low...180`
## • `95% CI - High` -&gt; `95% CI - High...181`
## • `# Deaths` -&gt; `# Deaths...197`
## • `95% CI - Low` -&gt; `95% CI - Low...199`
## • `95% CI - High` -&gt; `95% CI - High...200`
## • `95% CI - Low` -&gt; `95% CI - Low...219`
## • `95% CI - High` -&gt; `95% CI - High...220`
## • `95% CI - Low` -&gt; `95% CI - Low...243`
## • `95% CI - High` -&gt; `95% CI - High...244`
## • `95% CI - Low` -&gt; `95% CI - Low...247`
## • `95% CI - High` -&gt; `95% CI - High...248`
## • `95% CI - Low` -&gt; `95% CI - Low...266`
## • `95% CI - High` -&gt; `95% CI - High...267`</code></pre>
<p>Merge</p>
<pre class="r"><code>merge2020 = merge(x = hr2020, y = demo2020, by = &quot;county&quot;, all.x = TRUE) %&gt;% 
  mutate(year = 2020)</code></pre>
</div>
<div id="hr-demographics-1" class="section level3">
<h3>2021 HR &amp; Demographics</h3>
<p>Health Ranking Data</p>
<pre class="r"><code>hr2021 = read_excel(&#39;grace/ny_hr21.xlsx&#39;, sheet = &#39;Outcomes &amp; Factors SubRankings&#39;, skip = 1) %&gt;% 
  janitor::clean_names() %&gt;% 
  slice(-c(1)) %&gt;% 
  select(-starts_with(&quot;z&quot;), -fips) %&gt;% 
  rename(longevity_r = rank_5,
         qol_r = rank_7,
         health_beh_r = rank_9,
         clinical_care_r = rank_11,
         ses_r = rank_13,
         env_r = rank_15)</code></pre>
<p>Demographics Data</p>
<pre class="r"><code>demo2021 = read_excel(&#39;grace/ny_hr21.xlsx&#39;, sheet = &#39;Additional Measure Data&#39;, skip = 1) %&gt;% 
  janitor::clean_names() %&gt;% 
  slice(-c(1)) %&gt;% 
  select(&#39;county&#39;, 
         &#39;median_household_income&#39;, 
         &#39;segregation_index_2&#39;,
         &#39;number_uninsured_135&#39;,
         &#39;number_uninsured_139&#39;,
         &#39;number_black&#39;, 
         &#39;number_american_indian_alaska_native&#39;, 
         &#39;number_asian&#39;, 
         &#39;number_native_hawaiian_other_pacific_islander&#39;, 
         &#39;number_hispanic&#39;, 
         &#39;number_non_hispanic_white&#39;) %&gt;% 
  rename(median_income = median_household_income, 
         n_black = number_black, 
         n_aian = number_american_indian_alaska_native, 
         n_asian = number_asian, 
         n_nhpi = number_native_hawaiian_other_pacific_islander, 
         n_hispanic = number_hispanic, 
         n_white = number_non_hispanic_white,
         segregation_score = segregation_index_2) %&gt;% 
  mutate(n_uninsured = number_uninsured_135 + number_uninsured_139)</code></pre>
<p>Merge</p>
<pre class="r"><code>merge2021 = merge(x = hr2021, y = demo2021, by = &quot;county&quot;, all.x = TRUE) %&gt;% 
  mutate(year = 2021)</code></pre>
</div>
<div id="hr-demographics-2" class="section level3">
<h3>2022 HR &amp; Demographics</h3>
<p>Health Ranking Data</p>
<pre class="r"><code>hr2022 = read_excel(&#39;grace/ny_hr22.xlsx&#39;, sheet = &#39;Outcomes &amp; Factors SubRankings&#39;, skip = 1) %&gt;% 
  janitor::clean_names() %&gt;% 
  slice(-c(1)) %&gt;% 
  select(-starts_with(&quot;z&quot;), -fips) %&gt;% 
  rename(longevity_r = rank_5,
         qol_r = rank_7,
         health_beh_r = rank_9,
         clinical_care_r = rank_11,
         ses_r = rank_13,
         env_r = rank_15)</code></pre>
<p>Demographics Data</p>
<pre class="r"><code>demo2022 = read_excel(&#39;grace/ny_hr22.xlsx&#39;, sheet = &#39;Additional Measure Data&#39;, skip = 1) %&gt;% 
  janitor::clean_names() %&gt;% 
  slice(-c(1)) %&gt;% 
  select(&#39;county&#39;,
         &#39;median_household_income&#39;, 
         &#39;segregation_index&#39;,
         &#39;number_uninsured_137&#39;,
         &#39;number_uninsured_141&#39;,
         &#39;number_black&#39;, 
         &#39;number_american_indian_alaska_native&#39;, 
         &#39;number_asian&#39;, 
         &#39;number_native_hawaiian_other_pacific_islander&#39;, 
         &#39;number_hispanic&#39;, 
         &#39;number_non_hispanic_white&#39;) %&gt;% 
  rename(median_income = median_household_income, 
         n_black = number_black, 
         n_aian = number_american_indian_alaska_native, 
         n_asian = number_asian, 
         n_nhpi = number_native_hawaiian_other_pacific_islander, 
         n_hispanic = number_hispanic, 
         n_white = number_non_hispanic_white,
         segregation_score = segregation_index) %&gt;% 
  mutate(n_uninsured = number_uninsured_137 + number_uninsured_141)</code></pre>
<p>Merge</p>
<pre class="r"><code>merge2022 = merge(x = hr2022, y = demo2022, by = &quot;county&quot;, all.x = TRUE) %&gt;% 
  mutate(year = 2022)</code></pre>
</div>
</div>
<div id="load-2020-to-november-2022-ny-covid-19-data"
class="section level2">
<h2>Load 2020 to November 2022 NY COVID-19 Data</h2>
<p>Decided to look at variables related to covid testing (i.e., #
positive cases, # tests performed), covid vaccination rate, and
covid-related fatalities<br />
1. Import 3 separate csv files (ny_covidtest, ny_coviddeaths,
ny_covidvax) 3. Select variables of interest 4. Merge 3 sdata framess
into one by <code>date</code> and <code>county</code> 5. Convert
<code>date</code> data type from char to date 6. Separate date into day,
month, &amp; year for analysis</p>
<pre class="r"><code>## 2020 n_fatality availbable in demographics dataset? How to merge?

ny_test = read_csv(&#39;grace/ny_covidtest.csv&#39;) %&gt;% 
janitor::clean_names() %&gt;% 
filter(geography == &#39;COUNTY&#39;) %&gt;% 
select(-geography) %&gt;% 
rename(date = test_date) %&gt;% 
mutate(date = lubridate::mdy(date))  

ny_death = read_csv(&quot;grace/ny_coviddeaths.csv&quot;) %&gt;% 
janitor::clean_names() %&gt;% 
rename(date = report_date, n_fatality = place_of_fatality) %&gt;%
select(-deaths_by_county_of_residence) %&gt;% 
mutate(date = lubridate::mdy(date))

ny_vax = read_csv(&quot;grace/ny_covidvax.csv&quot;) %&gt;% 
janitor::clean_names() %&gt;% 
rename(date = report_as_of) %&gt;% 
select(-region, -series_complete) %&gt;% 
mutate(date = lubridate::mdy(date))

ny_covid_v1 = left_join(ny_test, ny_death, by = c(&quot;date&quot;, &quot;county&quot;))

covid_df = left_join(ny_covid_v1, ny_vax, by = c(&quot;date&quot;, &quot;county&quot;)) %&gt;% 
  separate(date, c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;), sep = &quot;-&quot;) %&gt;% 
  mutate(year = as.numeric(year), month = as.numeric(month), day = as.numeric(day))

covid_df_yr = covid_df %&gt;% 
  group_by(county, year) %&gt;% 
  summarise(new_cases = sum(new_positives),
            covid_tests = sum(total_number_of_tests_performed),
            vax_dose1 = max(first_dose))</code></pre>
</div>
<div id="merge-data-for-analysis" class="section level2">
<h2>Merge Data for Analysis</h2>
<p>Merge covid &amp; hr/demo data by year</p>
<p>2020</p>
<pre class="r"><code>covid2020 = covid_df_yr %&gt;% 
  filter(year == &#39;2020&#39;) 

ny2020 = left_join(covid2020, merge2020, by = c(&quot;county&quot;, &quot;year&quot;)) %&gt;% 
  mutate(n_minority = n_black + n_hispanic)

ny2020_fin = left_join(ny2020, ny_df, by = &quot;county&quot;)</code></pre>
<p>2021</p>
<pre class="r"><code>covid2021 = covid_df_yr %&gt;% 
  filter(year == &#39;2021&#39;)
  
ny2021 = left_join(covid2021, merge2021, by = c(&quot;county&quot;, &quot;year&quot;)) %&gt;%
  mutate(n_minority = n_black + n_hispanic)

ny2021_fin = left_join(ny2021, ny_df, by = &quot;county&quot;)</code></pre>
<p>2022</p>
<pre class="r"><code>covid2022 = covid_df_yr %&gt;% 
  filter(year == &#39;2022&#39;)
  
ny2022 = left_join(covid2022, merge2022, by = c(&quot;county&quot;, &quot;year&quot;))

ny2022_fin = left_join(ny2022, ny_df, by = &quot;county&quot;)</code></pre>
</div>
</div>
<div id="regression-test" class="section level1">
<h1>Regression Test:</h1>
<p>We are using 2021 data for the following reasons:<br />
* 2019: no info on # covid cases or # individuals who got
vaccinated.<br />
* 2020: no info on # of individuals who got vaccinated * 2022: data
incomplete, only have information up to 11/2022</p>
<p>Models: 1. Model 1: outcome = # covid cases, predictors = health rank
variables, median age 2. Model 2: outcome = # individuals who got the
first dose of the vaccine, predictors = health rank variables, median
age 3. Model 3: outcome = # covid cases, predictors = median income,
n_minority, segregation_score 4. Model 4: outcome = # individuals who
received dose 1 of the vaccine, predictors = median income, n_minority,
segregation_scor</p>
<div id="checking-assumptions" class="section level2">
<h2>Checking Assumptions:</h2>
<p>Model 1</p>
<pre class="r"><code>model1 = ny2021_fin %&gt;% 
  lm(new_cases ~ longevity_r + qol_r + health_beh_r + clinical_care_r + env_r + race_div + medage, data = .) 

plot(model1)</code></pre>
<p><img src="grace_v1_files/figure-html/unnamed-chunk-17-1.png" width="90%" /><img src="grace_v1_files/figure-html/unnamed-chunk-17-2.png" width="90%" /><img src="grace_v1_files/figure-html/unnamed-chunk-17-3.png" width="90%" /><img src="grace_v1_files/figure-html/unnamed-chunk-17-4.png" width="90%" /></p>
<pre class="r"><code># residual vs. leverage -- test for influential points. No points falls outside Cook&#39;s distance, indicating there are no major outliers

# residual vs. fitted -- no strong trend, so okay but demonstrates that there is more to be explored.

# normal q-q -- since most points fall along the line, no extreme skewness and the data is fairly normally distributed. Several deviations at the lowest/highest quartile indicate that random fluctuations may be seen at extreme ends.

# scale-location -- homoscedascity off

res_plot1 = ny2021_fin %&gt;% 
  modelr::add_residuals(model1) %&gt;% 
  modelr::add_predictions(model1) %&gt;% 
  ggplot(aes(x = pred, y = resid)) +
  geom_point() +
  labs(
    title = &quot;Model 1: Residual vs. Fitted Values&quot;,
    x = &quot;Fitted Values&quot;,
    y = &quot;Residuals&quot;)

res_plot1</code></pre>
<p><img src="grace_v1_files/figure-html/unnamed-chunk-17-5.png" width="90%" /></p>
<pre class="r"><code># residual vs. fitted: potentially non-constant variance, indicating that the model could be improved (i.e., adding more SES factors)</code></pre>
<p>Model 2</p>
<pre class="r"><code>model2 =
ny2021_fin %&gt;% 
  lm(vax_dose1 ~ longevity_r + qol_r + health_beh_r + clinical_care_r + env_r + ses_r + medage, data = .) 

plot(model2)</code></pre>
<p><img src="grace_v1_files/figure-html/unnamed-chunk-18-1.png" width="90%" /><img src="grace_v1_files/figure-html/unnamed-chunk-18-2.png" width="90%" /><img src="grace_v1_files/figure-html/unnamed-chunk-18-3.png" width="90%" /><img src="grace_v1_files/figure-html/unnamed-chunk-18-4.png" width="90%" /></p>
<pre class="r"><code># residual vs. lev = ok, nothing outside cook&#39;s
# residual vs. fitted = more to be explored
# normal q-q: okay
# scale-location: x homoscadascity

res_plot2 = ny2021_fin %&gt;% 
  modelr::add_residuals(model2) %&gt;% 
  modelr::add_predictions(model2) %&gt;% 
  ggplot(aes(x = pred, y = resid)) +
  geom_point() +
  labs(
    title = &quot;Model 2: Residual vs. Fitted Values&quot;,
    x = &quot;Fitted Values&quot;,
    y = &quot;Residuals&quot;)

res_plot2</code></pre>
<p><img src="grace_v1_files/figure-html/unnamed-chunk-18-5.png" width="90%" /></p>
<p>Model 3</p>
<pre class="r"><code>model3 =
  ny2021_fin %&gt;% 
  lm(new_cases ~ median_income + n_minority + segregation_score, data = .)

plot(model3)</code></pre>
<p><img src="grace_v1_files/figure-html/unnamed-chunk-19-1.png" width="90%" /><img src="grace_v1_files/figure-html/unnamed-chunk-19-2.png" width="90%" /><img src="grace_v1_files/figure-html/unnamed-chunk-19-3.png" width="90%" /><img src="grace_v1_files/figure-html/unnamed-chunk-19-4.png" width="90%" /></p>
<pre class="r"><code>res_plot3 = ny2021_fin %&gt;% 
  modelr::add_residuals(model3) %&gt;% 
  modelr::add_predictions(model3) %&gt;% 
  ggplot(aes(x = pred, y = resid)) +
  geom_point() +
  labs(
    title = &quot;Model 3: Residual vs. Fitted Values&quot;,
    x = &quot;Fitted Values&quot;,
    y = &quot;Residuals&quot;)

res_plot3</code></pre>
<p><img src="grace_v1_files/figure-html/unnamed-chunk-19-5.png" width="90%" /></p>
<p>Model 4</p>
<pre class="r"><code>model4 =
  ny2021_fin %&gt;% 
  lm(vax_dose1 ~ median_income + n_minority + segregation_score, data = .)

plot(model4)</code></pre>
<p><img src="grace_v1_files/figure-html/unnamed-chunk-20-1.png" width="90%" /><img src="grace_v1_files/figure-html/unnamed-chunk-20-2.png" width="90%" /><img src="grace_v1_files/figure-html/unnamed-chunk-20-3.png" width="90%" /><img src="grace_v1_files/figure-html/unnamed-chunk-20-4.png" width="90%" /></p>
<pre class="r"><code>res_plot4 = ny2021_fin %&gt;% 
  modelr::add_residuals(model4) %&gt;% 
  modelr::add_predictions(model4) %&gt;% 
  ggplot(aes(x = pred, y = resid)) +
  geom_point() +
  labs(
    title = &quot;Model 4: Residual vs. Fitted Values&quot;,
    x = &quot;Fitted Values&quot;,
    y = &quot;Residuals&quot;)

res_plot4</code></pre>
<p><img src="grace_v1_files/figure-html/unnamed-chunk-20-5.png" width="90%" /></p>
<div id="model-1" class="section level3">
<h3>Model 1:</h3>
<pre class="r"><code># decided to remove race_div (makes all variable appear insignificant and does not vary much from county to county)

model1 = ny2021_fin %&gt;% 
  lm(new_cases ~ longevity_r + qol_r + health_beh_r + clinical_care_r + env_r + race_div + medage, data = .) 

model1 %&gt;% 
  broom::tidy() %&gt;% 
  select(term, estimate, p.value) %&gt;% 
  knitr::kable(digits = 5)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-54065.36595</td>
<td align="right">0.59115</td>
</tr>
<tr class="even">
<td align="left">longevity_r</td>
<td align="right">-534.85145</td>
<td align="right">0.29224</td>
</tr>
<tr class="odd">
<td align="left">qol_r</td>
<td align="right">3.34777</td>
<td align="right">0.99435</td>
</tr>
<tr class="even">
<td align="left">health_beh_r</td>
<td align="right">-512.89212</td>
<td align="right">0.44221</td>
</tr>
<tr class="odd">
<td align="left">clinical_care_r</td>
<td align="right">818.75473</td>
<td align="right">0.05135</td>
</tr>
<tr class="even">
<td align="left">env_r</td>
<td align="right">-134.15312</td>
<td align="right">0.70320</td>
</tr>
<tr class="odd">
<td align="left">race_div</td>
<td align="right">367790.21248</td>
<td align="right">0.00000</td>
</tr>
<tr class="even">
<td align="left">medage</td>
<td align="right">691.93029</td>
<td align="right">0.75225</td>
</tr>
</tbody>
</table>
<p>Based on the result, among the 5 health ranking variables, ranks for
health behavior, clinical care, and socioeconomic factors were
significantly correlated with the number of covid cases. Additionally,
median age for each county was statistically significant. Among the
statistically significant predictors, health behavior ranking and median
age are negatively correlated to the number of covid cases.</p>
</div>
<div id="model-2" class="section level3">
<h3>Model 2:</h3>
<ol style="list-style-type: decimal">
<li>Outcome: # individuals who got the first dose of vaccine</li>
<li>Predictors: health ranking variables (ses_r, env_r, etc.), racial
diversity score (race_div), median age (med_age)</li>
</ol>
<pre class="r"><code># decided to remove race_div

model2 =
ny2021_fin %&gt;% 
  lm(vax_dose1 ~ longevity_r + qol_r + health_beh_r + clinical_care_r + env_r + ses_r + medage, data = .) 

model2 %&gt;% 
  broom::tidy() %&gt;% 
  select(term, estimate, p.value) %&gt;% 
  knitr::kable(digits = 5) </code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">1680734.061</td>
<td align="right">0.00257</td>
</tr>
<tr class="even">
<td align="left">longevity_r</td>
<td align="right">-6378.192</td>
<td align="right">0.07576</td>
</tr>
<tr class="odd">
<td align="left">qol_r</td>
<td align="right">4723.999</td>
<td align="right">0.13849</td>
</tr>
<tr class="even">
<td align="left">health_beh_r</td>
<td align="right">-18570.509</td>
<td align="right">0.00001</td>
</tr>
<tr class="odd">
<td align="left">clinical_care_r</td>
<td align="right">5547.020</td>
<td align="right">0.06052</td>
</tr>
<tr class="even">
<td align="left">env_r</td>
<td align="right">1458.937</td>
<td align="right">0.55311</td>
</tr>
<tr class="odd">
<td align="left">ses_r</td>
<td align="right">8341.958</td>
<td align="right">0.02319</td>
</tr>
<tr class="even">
<td align="left">medage</td>
<td align="right">-31869.647</td>
<td align="right">0.01568</td>
</tr>
</tbody>
</table>
<p>The table shows that health behavior rank, socioeconomic factor rank,
and median age are statistically significant. Of these variables, health
behavior rank and median age negatively correlated to the number of
individuals who received the first dose of the COVID vaccine.</p>
</div>
<div id="model-3" class="section level3">
<h3>Model 3:</h3>
<ol style="list-style-type: decimal">
<li>Outcome: # covid cases</li>
<li>Predictors: median income, number of minorities, segregation score,
and ses rank</li>
</ol>
<pre class="r"><code># decided to remove ses_r as it is not statistically significant (p &gt; .05)

model3 =
  ny2021_fin %&gt;% 
  lm(new_cases ~ median_income + n_minority + segregation_score, data = .)

model3 %&gt;% 
  broom::glance()</code></pre>
<pre><code>## # A tibble: 1 × 12
##   r.squared adj.r.squ…¹  sigma stati…²  p.value    df logLik   AIC   BIC devia…³
##       &lt;dbl&gt;       &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1     0.925       0.921 21573.    234. 5.27e-32     3  -693. 1396. 1407. 2.65e10
## # … with 2 more variables: df.residual &lt;int&gt;, nobs &lt;int&gt;, and abbreviated
## #   variable names ¹​adj.r.squared, ²​statistic, ³​deviance</code></pre>
<pre class="r"><code>model3 %&gt;% 
  broom::tidy() %&gt;% 
  select(term, estimate, p.value) %&gt;% 
  knitr::kable(digits = 5)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-82980.63633</td>
<td align="right">0.0000</td>
</tr>
<tr class="even">
<td align="left">median_income</td>
<td align="right">1.10467</td>
<td align="right">0.0000</td>
</tr>
<tr class="odd">
<td align="left">n_minority</td>
<td align="right">0.23754</td>
<td align="right">0.0000</td>
</tr>
<tr class="even">
<td align="left">segregation_score</td>
<td align="right">746.01372</td>
<td align="right">0.0027</td>
</tr>
</tbody>
</table>
<p>The results demonstrate that all the socioeconomic variables in the
model are significantly correlated with the number of covid cases. This
indicates that factors such as poverty and inequity, as seen in many
studies and reports, may be key determinants of COVID incidence.</p>
</div>
<div id="model-4" class="section level3">
<h3>Model 4:</h3>
<ol style="list-style-type: decimal">
<li>Outcome: # individuals who got the first dose of vaccine</li>
<li>Predictors: median income, number of minorities, segregation score,
and ses rank</li>
</ol>
<pre class="r"><code># removed ses_r
model4 =
  ny2021_fin %&gt;% 
  lm(vax_dose1 ~ median_income + n_minority + segregation_score, data = .)

model4 %&gt;% 
  broom::glance()</code></pre>
<pre><code>## # A tibble: 1 × 12
##   r.squared adj.r.squ…¹  sigma stati…²  p.value    df logLik   AIC   BIC devia…³
##       &lt;dbl&gt;       &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1     0.921       0.917 1.30e5    222. 2.19e-31     3  -803. 1616. 1627. 9.69e11
## # … with 2 more variables: df.residual &lt;int&gt;, nobs &lt;int&gt;, and abbreviated
## #   variable names ¹​adj.r.squared, ²​statistic, ³​deviance</code></pre>
<pre class="r"><code>model4 %&gt;% 
  broom::tidy() %&gt;% 
  select(term, estimate, p.value) %&gt;% 
  knitr::kable(digits = 5)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-490884.49770</td>
<td align="right">0.00000</td>
</tr>
<tr class="even">
<td align="left">median_income</td>
<td align="right">6.40047</td>
<td align="right">0.00000</td>
</tr>
<tr class="odd">
<td align="left">n_minority</td>
<td align="right">1.39538</td>
<td align="right">0.00000</td>
</tr>
<tr class="even">
<td align="left">segregation_score</td>
<td align="right">4652.57212</td>
<td align="right">0.00202</td>
</tr>
</tbody>
</table>
<p>Similar to model 3, the results indicate that race/ethnicity and
socioeconomic may be key determinants of COVID incidence.</p>
</div>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
